<div class="container px-6 mx-auto mt-10 grid" data-controller="compare">
  <% if @prompts.empty? || @model_versions.empty? %>
    <div class="flex items-center justify-center h-full">
      <p class="text-gray-500 text-center text-gray-900 dark:text-gray-100">
        No prompts or model versions available. <br>
        Please create prompts and model versions to perform this action.
      </p>
    </div>
  <% else %>
    <div>
      <label for="prompt-id-select" class="block text-sm font-medium text-gray-700 text-gray-900 dark:text-gray-100">Select Prompt:</label>
      <%= select_tag 'prompt-id-select', grouped_options_for_select(options_with_versions(@prompts, @ancestor_prompts)), 
                     class: 'form-control w-full px-3 py-2 border border-gray-300 rounded-md mb-4', 
                     id: 'prompt-id-select', 
                     data: { action: 'compare#loadTestRuns' } %>
    </div>
    <div>
      <label for="test-run-select" class="block text-sm font-medium text-gray-700 text-gray-900 dark:text-gray-100">Select Test Run:</label>
      <%= select_tag 'test-run-select', '', 
                     class: 'form-control w-full px-3 py-2 border border-gray-300 rounded-md mb-4', 
                     id: 'test-run-select', 
                     data: { action: 'compare#loadModelVersions' } %>
    </div>
    <div class="flex w-full">
      <div class="p-4 border-r border-gray-300 panel-half" data-controller="panel" data-panel-side="left">
        <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Select Model Version for Left Panel</h3>
        <%= select_tag 'left-panel-model', options_from_collection_for_select(@model_versions, 'id', 'full_name'), 
                       prompt: 'Select a model version', 
                       class: 'form-control w-full px-3 py-2 border border-gray-300 rounded-md', 
                       data: { action: 'change->compare#fetchLatestTestResult', 'compare-target': 'leftPanelSelect' } %>
        <div id="left-panel-result" class="mt-4 text-gray-900 dark:text-gray-100" data-compare-target="leftPanelResult"></div>
      </div>
      <div class="p-4 panel-half" data-controller="panel" data-panel-side="right">
        <h3 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Select Model Version for Right Panel</h3>
        <%= select_tag 'right-panel-model', options_from_collection_for_select(@model_versions, 'id', 'full_name'), 
                       prompt: 'Select a model version', 
                       class: 'form-control w-full px-3 py-2 border border-gray-300 rounded-md', 
                       data: { action: 'change->compare#fetchLatestTestResult', 'compare-target': 'rightPanelSelect' } %>
        <div id="right-panel-result" class="mt-4 text-gray-900 dark:text-gray-100" data-compare-target="rightPanelResult"></div>
      </div>
    </div>
  <% end %>
</div>
